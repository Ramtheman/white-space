<div class="container mt-5">
  <h1>Search spaces:</h1>
    <%= form_tag(spaces_path, method: :get) do %>
      <%= text_field_tag(:search, params[:search]) %>
      <%= submit_tag ("Search") %>
    <% end %>


    <% @spaces.each do |space| %>
      <div class="col-12 col-md-6">
        <div class="card-product">
          <% if space.photo.attached? %>
            <%= cl_image_tag space.photo.key, class: "image"%>
          <% else %>
            <%= image_tag "potato.jpg", class: "img" %>
          <% end %>
          <div class="card-product-infos">
            <h4><%= link_to space.title, space_path(space) %></h4>
            <p>Owner: <%= space.user.first_name %> <%= space.user.last_name %></p>
            <p>-------------------------</p>
            <p><%= space.space_type %></p>
            <p>£<%= space.price %></p>
          </div>
        </div>
      </div>
    <% end %>


  <h1>All Spaces</h1>
  <div class="row">
    <% @spaces.each do |space| %>
      <div class="col-12 col-md-6">
        <div class="card-product">
          <% if space.photo.attached? %>
            <%= cl_image_tag space.photo.key%>
          <% else %>
            <%= image_tag "potato.jpg", class: "img" %>
          <% end %>
          <div class="card-product-infos">
            <h4><%= link_to space.title, space_path(space) %></h4>
            <p>Owner: <%= space.user.first_name %> <%= space.user.last_name %></p>
            <p>-------------------------</p>
            <p><%= space.space_type %></p>
            <p>£<%= space.price %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <h3> Where you can find our spaces </h3>
  <div style="width: 100%; height: 600px;"
       data-controller="mapbox"
       data-mapbox-markers-value="<%= @markers.to_json %>"
       data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
